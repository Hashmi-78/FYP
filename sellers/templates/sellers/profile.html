{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Seller Profile - {{ seller_profile.business_name|default:"Seller Profile" }}</title>
  <link href="{% static 'css/output.css' %}" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <style>
    .profile-bg {
      background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 50%, #3b82f6 100%);
    }

    .card-hover:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 40px rgba(30, 64, 175, 0.15);
    }

    .badge {
      font-size: 0.75rem;
      font-weight: 700;
      padding: 0.375rem 1rem;
      border-radius: 9999px;
      border-width: 2px;
    }
  </style>
</head>

<body class="bg-gradient-to-br from-blue-50 to-indigo-50 min-h-screen">

  <div class="container mx-auto px-4 py-8 max-w-6xl">

    {% if messages %}
    {% for message in messages %}
    <div
      class="mb-4 p-4 rounded-lg {% if message.tags == 'success' %}bg-green-50 text-green-800 border border-green-200{% elif message.tags == 'error' %}bg-red-50 text-red-800 border border-red-200{% elif message.tags == 'warning' %}bg-yellow-50 text-yellow-800 border border-yellow-200{% else %}bg-blue-50 text-blue-800 border border-blue-200{% endif %}">
      {{ message }}
    </div>
    {% endfor %}
    {% endif %}

    {% if seller_profile and not request.GET.edit %}
    <!-- Profile Header Card -->
    <div class="bg-white rounded-3xl shadow-2xl overflow-hidden mb-10">
      <div class="profile-bg h-40 relative">
        <div class="absolute -bottom-16 left-1/2 transform -translate-x-1/2 md:left-10 md:translate-x-0">
          <div class="relative group">
            {% if seller_profile.business_logo %}
            <img src="{{ seller_profile.business_logo.url }}"
              class="w-36 h-36 rounded-full border-8 border-white shadow-2xl object-cover"
              alt="{{ seller_profile.business_name }}">
            {% else %}
            <div
              class="w-36 h-36 rounded-full border-8 border-white shadow-2xl bg-blue-900 flex items-center justify-center">
              <span class="text-white text-5xl font-bold">{{ seller_profile.business_name|slice:":1"|upper }}</span>
            </div>
            {% endif %}
          </div>
        </div>
      </div>

      <div class="pt-24 px-8 pb-12 text-center md:text-left">
        <div class="md:ml-48">

          <h1 class="text-4xl font-extrabold text-gray-800">{{ user.get_full_name|default:user.username }}</h1>
          <h2 class="text-2xl font-bold text-blue-900 mt-2">{{ seller_profile.business_name }}</h2>

          <div class="flex flex-wrap justify-center md:justify-start gap-3 mt-6">
            {% if seller_profile.rating >= 4.5 %}
            <span class="badge bg-yellow-100 text-yellow-700 border-yellow-300">Top Seller</span>
            {% endif %}
            {% if seller_profile.total_sales > 50 %}
            <span class="badge bg-green-100 text-green-700 border-green-300">Fast Responder</span>
            {% endif %}
            {% if seller_profile.is_verified %}
            <span class="badge bg-blue-100 text-blue-700 border-blue-300">Verified Seller</span>
            {% endif %}
            {% if seller_profile.rating > 0 %}
            <span class="badge bg-purple-100 text-purple-700 border-purple-300">{{ seller_profile.rating }}
              Rating</span>
            {% endif %}
            <!-- {% if seller_profile.is_active %}
            <span class="badge bg-emerald-100 text-emerald-700 border-emerald-300">Active</span>
            {% endif %} -->
          </div>

          <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 mt-8 text-lg">
            <div class="flex items-center gap-4">
              <i class="fas fa-phone text-blue-900 text-xl"></i>
              <span class="font-medium">{{ seller_profile.phone|default:"Not provided" }}</span>
            </div>
            <div class="flex items-center gap-4">
              <i class="fas fa-envelope text-blue-900 text-xl"></i>
              <span class="font-medium">{{ seller_profile.email|default:user.email }}</span>
            </div>
            <div class="flex items-center gap-4 col-span-2">
              <i class="fas fa-map-marker-alt text-blue-900 text-xl"></i>
              <span class="font-medium">{{ seller_profile.city|default:"City not set" }}</span>
            </div>
            <div class="flex items-center gap-4 col-span-2">
              {% if seller_profile.is_active and seller_profile.is_verified %}
              <i class="fas fa-check-circle text-green-600 text-2xl"></i>
              <span class="font-bold text-green-600">Active & Verified Seller</span>
              {% elif seller_profile.is_active %}
              <i class="fas fa-check-circle text-blue-600 text-2xl"></i>
              <span class="font-bold text-blue-600">Active Seller</span>
              {% else %}
              <i class="fas fa-exclamation-circle text-yellow-600 text-2xl"></i>
              <span class="font-bold text-yellow-600">Inactive Profile</span>
              {% endif %}
            </div>
          </div>

          <!-- Stats -->
          <div
            class="grid grid-cols-2 md:grid-cols-3 gap-4 mt-8 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl">
            <div class="text-center">
              <p class="text-3xl font-bold text-blue-900">{{ seller_profile.total_sales }}</p>
              <p class="text-sm text-gray-600 mt-1">Total Sales</p>
            </div>
            <div class="text-center">
              <p class="text-3xl font-bold text-blue-900">₨{{ seller_profile.total_revenue|floatformat:0 }}</p>
              <p class="text-sm text-gray-600 mt-1">Total Revenue</p>
            </div>
            <div class="text-center">
              <p class="text-3xl font-bold text-blue-900">{{ seller_profile.rating|floatformat:1 }}</p>
              <p class="text-sm text-gray-600 mt-1">Seller Rating</p>
            </div>
          </div>

          <!-- Business Description -->
          {% if seller_profile.business_description %}
          <div class="mt-8 p-6 bg-gray-50 rounded-2xl">
            <h3 class="text-lg font-bold text-gray-800 mb-2">About {{ seller_profile.business_name }}</h3>
            <p class="text-gray-700">{{ seller_profile.business_description }}</p>
          </div>
          {% endif %}

          <!-- Buttons -->
          <div class="mt-10 flex flex-col sm:flex-row gap-4 justify-center md:justify-start">
            <a href="{% url 'sellers:dashboard' %}"
              class="bg-blue-900 text-white px-10 py-4 rounded-full font-bold text-lg shadow-xl hover:shadow-2xl transform hover:scale-105 transition text-center">
              <i class="fas fa-tachometer-alt mr-2"></i>Go to Dashboard
            </a>
            <a href="?edit=true"
              class="bg-gradient-to-r from-purple-600 to-purple-700 text-white px-10 py-4 rounded-full font-bold text-lg shadow-xl hover:shadow-2xl transform hover:scale-105 transition text-center">
              <i class="fas fa-edit mr-2"></i>Edit Profile
            </a>
            <!-- <a href="{% url 'sellers:add_product' %}"
              class="bg-gradient-to-r from-green-600 to-emerald-600 text-white px-10 py-4 rounded-full font-bold text-lg shadow-xl hover:shadow-2xl transform hover:scale-105 transition text-center">
              <i class="fas fa-plus mr-2"></i>Add Product
            </a> -->
          </div>
        </div>
      </div>
    </div>

    {% else %}
    <!-- Create/Edit Profile Form Card -->
    <div class="bg-white rounded-3xl shadow-2xl p-8 md:p-12 mb-10">
      <div class="max-w-3xl mx-auto">
        <div class="text-center mb-10">
          <i class="fas fa-user-{% if is_new %}plus{% else %}edit{% endif %} text-6xl text-blue-900 mb-6"></i>
          <h2 class="text-3xl font-bold text-gray-800 mb-4">
            {% if is_new %}Create Your Seller Profile{% else %}Edit Seller Profile{% endif %}
          </h2>
          <p class="text-gray-600">
            {% if is_new %}
            Complete your seller profile to start selling on our platform.
            {% else %}
            Update your business information to keep your profile current.
            {% endif %}
          </p>
        </div>

        <form method="post" enctype="multipart/form-data" class="space-y-6">
          {% csrf_token %}

          <!-- Business Information -->
          <div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-2xl">
            <h3 class="text-xl font-bold text-blue-900 mb-4 flex items-center">
              <i class="fas fa-store mr-2"></i> Business Information
            </h3>

            <div class="space-y-4">
              <div>
                <label for="id_business_name" class="block text-sm font-bold text-gray-700 mb-2">
                  {{ form.business_name.label }} <span class="text-red-500">*</span>
                </label>
                {{ form.business_name}}
              </div>

              <div>
                <label for="id_business_description" class="block text-sm font-bold text-gray-700 mb-2">
                  {{ form.business_description.label }}
                </label>
                {{ form.business_description }}
              </div>

              <div>
                <label for="id_business_logo" class="block text-sm font-bold text-gray-700 mb-2">
                  {{ form.business_logo.label }}
                </label>
                {{ form.business_logo }}
                {% if seller_profile and seller_profile.business_logo %}
                <div class="mt-2 flex items-center gap-4">
                  <img src="{{ seller_profile.business_logo.url }}" alt="Current logo"
                    class="w-20 h-20 rounded-lg object-cover border-2 border-gray-300">
                  <span class="text-sm text-gray-600">Current logo</span>
                </div>
                {% endif %}
              </div>
            </div>
          </div>

          <!-- Contact Information -->
          <div class="bg-gradient-to-r from-green-50 to-emerald-50 p-6 rounded-2xl">
            <h3 class="text-xl font-bold text-green-900 mb-4 flex items-center">
              <i class="fas fa-address-book mr-2"></i> Contact Information
            </h3>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label for="id_phone" class="block text-sm font-bold text-gray-700 mb-2">
                  {{ form.phone.label }} <span class="text-red-500">*</span>
                </label>
                {{ form.phone }}
              </div>

              <div>
                <label for="id_email" class="block text-sm font-bold text-gray-700 mb-2">
                  {{ form.email.label }} <span class="text-red-500">*</span>
                </label>
                {{ form.email }}
              </div>

              <div class="md:col-span-2">
                <label for="id_address" class="block text-sm font-bold text-gray-700 mb-2">
                  {{ form.address.label }} <span class="text-red-500">*</span>
                </label>
                {{ form.address }}
              </div>

              <div class="md:col-span-2">
                <label for="id_city" class="block text-sm font-bold text-gray-700 mb-2">
                  {{ form.city.label }} <span class="text-red-500">*</span>
                </label>
                {{ form.city }}
              </div>
            </div>
          </div>

          <!-- Submit Button -->
          <div class="flex justify-end gap-4 mt-8">
            {% if not is_new %}
            <a href="{% url 'sellers:profile' %}"
              class="bg-gray-200 text-gray-700 px-8 py-3 rounded-full font-bold text-lg shadow-md hover:shadow-lg transform hover:scale-105 transition text-center flex items-center">
              <i class="fas fa-times mr-2"></i>Cancel
            </a>
            {% endif %}

            <button type="submit"
              class="bg-gradient-to-r from-blue-600 to-blue-800 text-white px-10 py-3 rounded-full font-bold text-lg shadow-xl hover:shadow-2xl transform hover:scale-105 transition flex items-center">
              <i class="fas fa-save mr-2"></i>
              {% if is_new %}Create Profile{% else %}Update Profile{% endif %}
            </button>
          </div>
        </form>
      </div>
    </div>
    {% endif %}
    <h2 class="text-3xl font-extrabold text-blue-900 mb-8 text-center">Seller Dashboard Features</h2>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">

      <a href="{% url 'sellers:dashboard' %}"
        class="bg-white rounded-2xl shadow-xl p-6 text-center card-hover transition-all border border-indigo-100">
        <div class="w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <i class="fa-brands fa-slack text-3xl text-indigo-600"></i>
        </div>
        <h3 class="font-bold text-gray-800 text-lg">Product Listing</h3>
        <p class="text-sm text-gray-600 mt-2">Your Listing Product</p>
      </a>

      <a href="{% url 'sellers:add_product' %}"
        class="bg-white rounded-2xl shadow-xl p-6 text-center card-hover transition-all border border-blue-100">
        <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <i class="fas fa-plus-circle text-3xl text-blue-900"></i>
        </div>
        <h3 class="font-bold text-gray-800 text-lg">Add Products</h3>
        <p class="text-sm text-gray-600 mt-2">Upload new products</p>
      </a>

      <a href="{% url 'sellers:orders' %}"
        class="bg-white rounded-2xl shadow-xl p-6 text-center card-hover transition-all border border-green-100">
        <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <i class="fas fa-shopping-bag text-3xl text-green-600"></i>
        </div>
        <h3 class="font-bold text-gray-800 text-lg">Order Management</h3>
        <p class="text-sm text-gray-600 mt-2">Process & track orders</p>
      </a>

      <a href="{% url 'sellers:messages' %}"
        class="bg-white rounded-2xl shadow-xl p-6 text-center card-hover transition-all border border-purple-100">
        <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <i class="fas fa-comments text-3xl text-purple-600"></i>
        </div>
        <h3 class="font-bold text-gray-800 text-lg">Messages</h3>
        <p class="text-sm text-gray-600 mt-2">Chat with customers</p>
      </a>

      <a href="{% url 'sellers:delivery' %}"
        class="bg-white rounded-2xl shadow-xl p-6 text-center card-hover transition-all border border-orange-100">
        <div class="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <i class="fas fa-truck text-3xl text-orange-600"></i>
        </div>
        <h3 class="font-bold text-gray-800 text-lg">Delivery Area</h3>
        <p class="text-sm text-gray-600 mt-2">Set delivery radius</p>
      </a>

      <a href="{% url 'sellers:sales_graph' %}"
        class="bg-white rounded-2xl shadow-xl p-6 text-center card-hover transition-all border border-indigo-100">
        <div class="w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <i class="fas fa-chart-line text-3xl text-indigo-600"></i>
        </div>
        <h3 class="font-bold text-gray-800 text-lg">Sales Analytics</h3>
        <p class="text-sm text-gray-600 mt-2">Revenue & performance</p>
      </a>

      <a href="{% url 'sellers:payment' %}"
        class="bg-white rounded-2xl shadow-xl p-6 text-center card-hover transition-all border border-gray-200">
        <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <i class="fas fa-wallet text-3xl text-gray-600"></i>
        </div>
        <h3 class="font-bold text-gray-800 text-lg">Payouts</h3>
        <p class="text-sm text-gray-600 mt-2">Easy take out money</p>
      </a>

      <a href="{% url 'sellers:profile' %}"
        class="bg-white rounded-2xl shadow-xl p-6 text-center card-hover transition-all border border-blue-100">
        <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <i class="fas fa-user-cog text-3xl text-blue-600"></i>
        </div>
        <h3 class="font-bold text-gray-800 text-lg">Profile Settings</h3>
        <p class="text-sm text-gray-600 mt-2">Update your info</p>
      </a>

    </div>

    <div class="text-center mt-12 text-gray-500">
      <p class="text-sm">© 2025 Ahyera Store • Premium Seller Panel</p>
      <p class="text-xs mt-1">Member since {{ seller_profile.created_at|date:"F Y"|default:"Recently" }}
      </p>
    </div>
  </div>

</body>

</html>